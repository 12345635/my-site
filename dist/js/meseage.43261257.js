(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["meseage"],{6140:function(e,t,n){"use strict";n("b625")},"8fc4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"messageContainer",staticClass:"message-container"},[n("BlogComment")],1)},a=[],c=n("5530"),s=n("1da1"),o=(n("99af"),n("96cf"),n("49e1")),i=n("e128"),u=n("f119"),l=n("864d"),f=n("ed08"),h={mixins:[Object(i["a"])({total:0,rows:[]}),Object(u["a"])("messageContainer")],components:{BlogComment:o["a"]},data:function(){return{page:1,limit:10}},computed:{hasMore:function(){return this.data.rows.length>=this.data.total}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["a"])(e.setSelect,20);case 2:e.setSelectDebounce=t.sent,e.$bus.$on("mainScroll",e.setSelectDebounce);case 4:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.$bus.$off("mainScroll",this.setSelectDebounce)},methods:{fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])(e.$route.params.id,e.page,e.limit);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},handleSubmit:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["e"])(Object(c["a"])({blogId:n.$route.params.id},e));case 2:a=r.sent,n.data.rows.unshift(a),n.data.total++,t("评论成功");case 6:case"end":return r.stop()}}),r)})))()},setSelect:function(e){if(!this.loading&&e){var t=50,n=Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight);n<=t&&this.fetchMore()}},fetchMore:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasMore){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.page++,t.next=6,e.fetchData();case 6:n=t.sent,e.data.total=n.total,e.data.rows=e.data.rows.concat(n.rows),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()}}},d=h,m=(n("6140"),n("2877")),p=Object(m["a"])(d,r,a,!1,null,"00868192",null);t["default"]=p.exports},b625:function(e,t,n){}}]);